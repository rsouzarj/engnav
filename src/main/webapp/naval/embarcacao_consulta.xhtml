<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:define name="head">
        <script type="text/javascript">
            function skinChart() {
                this.cfg.shadow = false;
                this.cfg.seriesColors = ['#71CC8D', '#33AFDE', '#F7941E'];
                this.cfg.grid = {
                    background: '#EDF3F6',
                    borderColor: '#D9E3E8',
                    gridLineColor: '#D9E3E8',
                    shadow: false
                };
                this.cfg.axesDefaults = {
                    rendererOptions: {
                        textColor: '#778D9B'
                    }
                };
                this.cfg.seriesDefaults = {
                    shadow: false,
                    markerOptions: {
                        shadow: false
                    }
                }
            }

            function skinPie() {
                this.cfg.seriesColors = ['#dae8ef', '#27aae1', '#33ccff', '#9fadb5'];
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#eaeaea',
                    gridLineColor: '#e5ebf0',
                    shadow: false,
                    borderWidth: 0
                };
                this.cfg.seriesDefaults.shadow = false;
            }
            /*Botão topo*/
            $(document).ready(function () {
                $(window).scroll(function () {
                    if ($(this).scrollTop() > 100) {
                        $('a[href="#top"]').fadeIn();
                    } else {
                        $('a[href="#top"]').fadeOut();
                    }
                });

                $('a[href="#top"]').click(function () {
                    $('html, body').animate({scrollTop: 0}, 800);
                    return false;
                });
            });
        </script>
        <style type="text/css">
            .jqplot-target, .jqplot-axis {
                color: #778D9B;
            }
            /*Botão topo */
            a[href="#top"]{
                padding:10px;
                position:fixed;
                top: 90%;
                right:2px;
                display:none;
                font-size: 30px;
            }
            a[href="#top"]:hover{
                text-decoration:none;
            }
            h2{color:black;}
        </style>

        <f:metadata>
            <f:viewAction  action="#{nvEmbarcacaoController.iniciar()}"  />
        </f:metadata>
    </ui:define>

    <ui:define name="content"  >

        <div class="layout-portlets-box" >
            <div class="Container100 ui-fluid">
                <div class="ContainerIndent"> 

                    <a href="#top"><p:commandButton icon="fa fa-arrow-up Fs18 white"/></a>

                    <p:messages id="messages"  autoUpdate="true" closable="true" />
                    <h:form id="frmLista" >


                        <div class="Container100 Responsive100">
                            <p:panelGrid rendered="#{nvEmbarcacaoController.tela == 0}" >
                                <h2 >Embarcação</h2>
                                <h2 class="BigTopic"/>
                            </p:panelGrid>
                            <p:panelGrid rendered="#{nvEmbarcacaoController.tela == 0}" columns="3" layout="grid" styleClass="ui-panelgrid-blank" columnClasses="ui-grid-col-3,ui-grid-col-0,ui-grid-col-0">
                                <p:outputLabel value="Pesquisa"/>
                                <p:outputLabel value=""/>
                                <p:outputLabel value=""/>

                                <p:inputText value="#{nvEmbarcacaoController.pesquisa}"/>
                                <p:commandButton value="Buscar" actionListener="#{nvEmbarcacaoController.listar()}" update=":frmDetalhe :frmLista :frmCabec" />

                            </p:panelGrid>
                        </div>

                        <div class="Container100 MarTop10" >

                            <p:dataTable id="listaPesquisa" rendered="#{nvEmbarcacaoController.tela == 0}"  var="p" value="#{nvEmbarcacaoController.listaNvEmbarcacao}" reflow="false" style="" emptyMessage="Lista vazia" paginator="true" rows="15"  rowsPerPageTemplate="15,50,100">
                                <p:column headerText="Nome" sortBy="#{p.nome}">
                                    <h:outputText value="#{p.nome}"  title="#{p.nome}"/>

                                </p:column>

                                <p:column headerText="Tipo" sortBy="#{p.tipo}">
                                    <h:outputText value="#{p.tipo}"  title="#{p.tipo}"/>
                                </p:column>

                                <p:column headerText="Área de Navegação" sortBy="#{p.areaNavegacao}">
                                    <h:outputText value="#{p.areaNavegacao}"  title="#{p.areaNavegacao}"/>
                                </p:column>

                                <p:column headerText="Área de Navegação Tipo" sortBy="#{p.areaNavegacaoTipo}">
                                    <h:outputText value="#{p.areaNavegacaoTipo}"  title="#{p.areaNavegacaoTipo}"/>
                                </p:column>                                

                                <p:column headerText="Tipo de Embarcação" sortBy="#{p.tipoEmbarcacaoNome}">
                                    <h:outputText value="#{p.tipoEmbarcacaoNome}"  title="#{p.tipoEmbarcacaoNome}"/>
                                </p:column>

                                <p:column headerText="Tipo de Atividade/Serviço Mar Aberto " sortBy="#{p.tipoAtividadeMar}">
                                    <h:outputText value="#{p.tipoAtividadeMar}"  title="#{p.tipoAtividadeMar}"/>
                                </p:column>

                                <p:column headerText="Documentação" width="8%">
                                    <p:commandButton icon="fa fa-folder-open-o Fs18 white"  actionListener="#{nvEmbarcacaoController.selecionar(p)}" ajax="false" update=":frmDetalhe :frmLista"/>
                                </p:column>                                

                            </p:dataTable>

                        </div>                                    

                    </h:form>                      
                    <h:form id="frmCabec">
                        <p:panelGrid rendered="#{nvEmbarcacaoController.tela == 1}" >    
                            <h2><h:outputText value="#{nvEmbarcacaoController.nvEmbarcacao.nome}"/></h2>
                            <h3>Documentação</h3>
                            <h2 class="BigTopic"/>  

                        </p:panelGrid>     

                    </h:form>



                    <h:form id="frmDetalhe" enctype="multipart/form-data">                             

                        <div>
                            <p:accordionPanel activeIndex="null" rendered='#{nvEmbarcacaoController.tela ==1}'>
                                <p:tab title="VISTORIAS">
                                    <p:dataTable id="listaVistoria" var="p" value="#{nvEmbarcacaoController.listaNvVistoria}" reflow="true">
                                        <p:column headerText="Identificação" sortBy="#{p.identificacao}">
                                            <h:outputText value="#{p.identificacao}"  title="#{p.identificacao}" >
                                            </h:outputText> 
                                        </p:column>

                                        <p:column headerText="Tipo" sortBy="#{p.tipoVistoria}">
                                            <h:outputText value="#{p.tipoVistoria}"  title="#{p.tipoVistoria}">
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="Dt. da Vistoria" sortBy="#{p.dataVistoria}">
                                            <h:outputText value="#{p.dataVistoria}"  title="#{p.dataVistoria}"  >
                                                <f:convertDateTime type="date" pattern="dd/MM/yyyy" dateStyle="medium" locale="pt_BR" />
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="UF da Vistoria" sortBy="#{p.estadoVistoria}">
                                            <h:outputText value="#{p.estadoVistoria}"  title="#{p.estadoVistoria}">
                                            </h:outputText>
                                        </p:column>  

                                        <p:column headerText="Vistoriador" sortBy="#{p.colaboradorNome}">
                                            <h:outputText value="#{p.colaboradorNome}"  title="#{p.colaboradorNome}">
                                            </h:outputText>
                                        </p:column>  

                                        <p:column headerText="Aprovado por:" sortBy="#{p.usuario}">
                                            <h:outputText value="#{p.usuario}"  title="#{p.usuario}">
                                            </h:outputText>
                                        </p:column>                                                      

                                    </p:dataTable>
                                </p:tab>
                            </p:accordionPanel>
                        </div>                   
                        <div>
                            <p:accordionPanel activeIndex="null" rendered='#{nvEmbarcacaoController.tela ==1}'>
                                <p:tab title="CERTIFICADOS">
                                    <p:dataTable id="listaCertificado" var="p" value="#{nvEmbarcacaoController.listaNvCertificado}"  reflow="true">
                                        <p:column headerText="Identificação" sortBy="#{p.identificacao}">
                                            <h:outputText value="#{p.identificacao}"  title="#{p.identificacao}" >
                                            </h:outputText> 
                                        </p:column>

                                        <p:column headerText="Tipo" sortBy="#{p.tipoCertificado}">
                                            <h:outputText value="#{p.tipoCertificado}"  title="#{p.tipoCertificado}" >
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="Dt. Emissao" sortBy="#{p.dataEmissao}">
                                            <h:outputText value="#{p.dataEmissao}"  title="#{p.dataEmissao}"  >
                                                <f:convertDateTime type="date" pattern="dd/MM/yyyy" dateStyle="medium" locale="pt_BR"  />
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="Dt. Validade" sortBy="#{p.dataValidade}">
                                            <h:outputText value="#{p.dataValidade}"  title="#{p.dataValidade}"  >
                                                <f:convertDateTime type="date" pattern="dd/MM/yyyy" dateStyle="medium" locale="pt_BR"  />
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="STATUS" sortBy="#{p.status}">
                                            <h:outputText value="#{p.status}"  title="#{p.status}"  >

                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="Vistoria" sortBy="#{p.identVistoria}">
                                            <h:outputText value="#{p.identVistoria}"  title="#{p.identVistoria}"  >

                                            </h:outputText>
                                        </p:column>                                                     
                                    </p:dataTable>
                                </p:tab>
                            </p:accordionPanel>          
                        </div>  


                        <div>
                            <p:accordionPanel activeIndex="null" rendered='#{nvEmbarcacaoController.tela ==1}'>
                                <p:tab title="LICENÇAS">
                                    <p:dataTable id="listaLicenca" var="p" value="#{nvEmbarcacaoController.listaNvLicenca}"  reflow="true">
                                        <p:column headerText="Identificação" sortBy="#{p.identificacao}">
                                            <h:outputText value="#{p.identificacao}"  title="#{p.identificacao}" >
                                            </h:outputText> 
                                        </p:column>

                                        <p:column headerText="Tipo" sortBy="#{p.seqNvTipoLicenca}">
                                            <h:outputText value="#{p.seqNvTipoLicenca}"  title="#{p.seqNvTipoLicenca}">
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="Vistoriador" sortBy="#{p.nomeVistoriador}">
                                            <h:outputText value="#{p.nomeVistoriador}"  title="#{p.nomeVistoriador}"  >
                                                <f:convertDateTime type="date" pattern="dd/MM/yyyy" dateStyle="medium" locale="pt_BR"  />
                                            </h:outputText>
                                        </p:column>                                                            
                                        <p:column headerText="Dt. Emissao" sortBy="#{p.dataEmissao}">
                                            <h:outputText value="#{p.dataEmissao}"  title="#{p.dataEmissao}"  >
                                                <f:convertDateTime type="date" pattern="dd/MM/yyyy" dateStyle="medium" locale="pt_BR"  />
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="Dt. Validade" sortBy="#{p.validadeLicencaTemporaria}">
                                            <h:outputText value="#{p.validadeLicencaTemporaria}"  title="#{p.validadeLicencaTemporaria}"  >
                                                <f:convertDateTime type="date" pattern="dd/MM/yyyy" dateStyle="medium" locale="pt_BR"  />
                                            </h:outputText>
                                        </p:column>


                                    </p:dataTable>
                                </p:tab>
                            </p:accordionPanel>          
                        </div>  

                        <div>                              
                            <p:accordionPanel activeIndex="null" rendered="#{nvEmbarcacaoController.nvEmbarcacao.seqNvEmbarcacao != null}">
                                <p:tab title="ANEXOS"  >


                                    <p:dataTable id="tblAnexos" var="a" rowIndexVar="index" value="#{nvEmbarcacaoController.listaUpload}" emptyMessage="Lista vazia" reflow="true">
                                        <p:column headerText="ID" width="8%" style="text-align: center">
                                            <p:outputLabel value="#{index+1}"/>
                                        </p:column>
                                        <p:column headerText="Nome" style="text-align: center">
                                            <p:outputLabel value="#{a.nomeArquivo}"/>
                                        </p:column>
                                        <p:column headerText="Tipo" style="text-align: center">
                                            <p:outputLabel value="#{a.tipoArquivo}"/>
                                        </p:column>
                                        <p:column headerText="Origem" style="text-align: center">
                                            <p:outputLabel value="#{a.origem}"/>
                                        </p:column>
                                        <p:column headerText="Download" width="8%" style="text-align: center" >
                                            <p:commandButton actionListener="#{nvEmbarcacaoController.download(a)}" onclick="this.form.target = '_blank'" style="width: 50px" ajax="false"  icon="fa fa-arrow-circle-down white">
                                                <p:fileDownload value="#{nvEmbarcacaoController.fileDownload}" />
                                            </p:commandButton>
                                        </p:column>

                                    </p:dataTable>

                                </p:tab>
                            </p:accordionPanel>                                                                    
                        </div>                                     
                        <h2 class="BigTopic"/>                                      



                        <p:messages id="messages2"  autoUpdate="true" closable="true" />

                        <p:panelGrid   columns="8"  layout="grid" styleClass="ui-panelgrid-blank" columnClasses="ui-grid-col-0,ui-grid-col-0,ui-grid-col-0,ui-grid-col-0" >
                            <p:commandButton value="Voltar" immediate="true" actionListener="#{nvEmbarcacaoController.mudarTela(0)}" update=":frmDetalhe :frmLista" />
                        </p:panelGrid>
                    </h:form>

                </div>

            </div>
        </div>

    </ui:define>

</ui:composition>